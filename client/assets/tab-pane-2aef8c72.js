import{m as re,E as V,a as Te,b as Ee,c as Pe,d as D,u as we,p as $e,i as ne}from"./index-5ef9de39.js";import{e as Se,i as X,f as Q,s as xe,g as K,h as Z,d as F,j as ee,u as U,r as E,k as R,n as te,l as ie,o as ce,m as ue,p as de,q as B,t as Be,v as be,x as q,y as ke,z as Oe,A as M,B as ve,C as Re,a as f,D as fe,E as ze,F as Ae,G as Fe,H as Me,I as oe,J as Le,K as Ve,L as De,M as Ie,N as Ke,O as Ue,P as qe}from"./index-10b0a162.js";const O=e=>Se(e);class He extends Error{constructor(a){super(a),this.name="ElementPlusError"}}function ae(e,a){throw new He(`[${e}] ${a}`)}const me="update:modelValue",I=e=>{const a=X(e)?e:[e],r=[];return a.forEach(u=>{var i;X(u)?r.push(...I(u)):Q(u)&&X(u.children)?r.push(...I(u.children)):(r.push(u),Q(u)&&((i=u.component)!=null&&i.subTree)&&r.push(...I(u.component.subTree)))}),r},je=(e,a,r)=>I(e.subTree).filter(t=>{var o;return Q(t)&&((o=t.type)==null?void 0:o.name)===a&&!!t.component}).map(t=>t.component.uid).map(t=>r[t]).filter(t=>!!t),We=(e,a)=>{const r={},u=xe([]);return{children:u,addChild:o=>{r[o.uid]=o,u.value=je(e,a,r)},removeChild:o=>{delete r[o],u.value=u.value.filter($=>$.uid!==o)}}},H=Symbol("tabsRootContextKey"),Ge=K({tabs:{type:Z(Array),default:()=>re([])}}),pe="ElTabBar",Je=F({name:pe}),Xe=F({...Je,props:Ge,setup(e,{expose:a}){const r=e,u=q(),i=ee(H);i||ae(pe,"<el-tabs><el-tab-bar /></el-tabs>");const t=U("tabs"),o=E(),$=E(),b=()=>{let m=0,p=0;const v=["top","bottom"].includes(i.props.tabPosition)?"width":"height",l=v==="width"?"x":"y",k=l==="x"?"left":"top";return r.tabs.every(S=>{var w,s;const y=(s=(w=u.parent)==null?void 0:w.refs)==null?void 0:s[`tab-${S.uid}`];if(!y)return!1;if(!S.active)return!0;m=y[`offset${O(k)}`],p=y[`client${O(v)}`];const N=window.getComputedStyle(y);return v==="width"&&(r.tabs.length>1&&(p-=Number.parseFloat(N.paddingLeft)+Number.parseFloat(N.paddingRight)),m+=Number.parseFloat(N.paddingLeft)),!1}),{[v]:`${p}px`,transform:`translate${O(l)}(${m}px)`}},g=()=>$.value=b();return R(()=>r.tabs,async()=>{await te(),g()},{immediate:!0}),ie(o,()=>g()),a({ref:o,update:g}),(m,p)=>(ce(),ue("div",{ref_key:"barRef",ref:o,class:de([B(t).e("active-bar"),B(t).is(B(i).props.tabPosition)]),style:Be($.value)},null,6))}});var Ye=be(Xe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const Qe=K({panes:{type:Z(Array),default:()=>re([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Ze={tabClick:(e,a,r)=>r instanceof Event,tabRemove:(e,a)=>a instanceof Event},le="ElTabNav",et=F({name:le,props:Qe,emits:Ze,setup(e,{expose:a,emit:r}){const u=q(),i=ee(H);i||ae(le,"<el-tabs><tab-nav /></el-tabs>");const t=U("tabs"),o=ke(),$=Oe(),b=E(),g=E(),m=E(),p=E(),v=E(!1),l=E(0),k=E(!1),S=E(!0),w=M(()=>["top","bottom"].includes(i.props.tabPosition)?"width":"height"),s=M(()=>({transform:`translate${w.value==="width"?"X":"Y"}(-${l.value}px)`})),y=()=>{if(!b.value)return;const c=b.value[`offset${O(w.value)}`],d=l.value;if(!d)return;const n=d>c?d-c:0;l.value=n},N=()=>{if(!b.value||!g.value)return;const c=g.value[`offset${O(w.value)}`],d=b.value[`offset${O(w.value)}`],n=l.value;if(c-n<=d)return;const C=c-n>d*2?n+d:c-d;l.value=C},z=async()=>{const c=g.value;if(!v.value||!m.value||!b.value||!c)return;await te();const d=m.value.querySelector(".is-active");if(!d)return;const n=b.value,C=["top","bottom"].includes(i.props.tabPosition),T=d.getBoundingClientRect(),_=n.getBoundingClientRect(),x=C?c.offsetWidth-_.width:c.offsetHeight-_.height,P=l.value;let h=P;C?(T.left<_.left&&(h=P-(_.left-T.left)),T.right>_.right&&(h=P+T.right-_.right)):(T.top<_.top&&(h=P-(_.top-T.top)),T.bottom>_.bottom&&(h=P+(T.bottom-_.bottom))),h=Math.max(h,0),l.value=Math.min(h,x)},L=()=>{var c;if(!g.value||!b.value)return;e.stretch&&((c=p.value)==null||c.update());const d=g.value[`offset${O(w.value)}`],n=b.value[`offset${O(w.value)}`],C=l.value;n<d?(v.value=v.value||{},v.value.prev=C,v.value.next=C+n<d,d-C<n&&(l.value=d-n)):(v.value=!1,C>0&&(l.value=0))},ge=c=>{const d=c.code,{up:n,down:C,left:T,right:_}=D;if(![n,C,T,_].includes(d))return;const x=Array.from(c.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),P=x.indexOf(c.target);let h;d===T||d===n?P===0?h=x.length-1:h=P-1:P<x.length-1?h=P+1:h=0,x[h].focus({preventScroll:!0}),x[h].click(),se()},se=()=>{S.value&&(k.value=!0)},j=()=>k.value=!1;return R(o,c=>{c==="hidden"?S.value=!1:c==="visible"&&setTimeout(()=>S.value=!0,50)}),R($,c=>{c?setTimeout(()=>S.value=!0,50):S.value=!1}),ie(m,L),ve(()=>setTimeout(()=>z(),0)),Re(()=>L()),a({scrollToActiveTab:z,removeFocus:j}),R(()=>e.panes,()=>u.update(),{flush:"post",deep:!0}),()=>{const c=v.value?[f("span",{class:[t.e("nav-prev"),t.is("disabled",!v.value.prev)],onClick:y},[f(V,null,{default:()=>[f(Te,null,null)]})]),f("span",{class:[t.e("nav-next"),t.is("disabled",!v.value.next)],onClick:N},[f(V,null,{default:()=>[f(Ee,null,null)]})])]:null,d=e.panes.map((n,C)=>{var T,_,x,P;const h=n.uid,W=n.props.disabled,G=(_=(T=n.props.name)!=null?T:n.index)!=null?_:`${C}`,J=!W&&(n.isClosable||e.editable);n.index=`${C}`;const _e=J?f(V,{class:"is-icon-close",onClick:A=>r("tabRemove",n,A)},{default:()=>[f(Pe,null,null)]}):null,Ne=((P=(x=n.slots).label)==null?void 0:P.call(x))||n.props.label,Ce=!W&&n.active?0:-1;return f("div",{ref:`tab-${h}`,class:[t.e("item"),t.is(i.props.tabPosition),t.is("active",n.active),t.is("disabled",W),t.is("closable",J),t.is("focus",k.value)],id:`tab-${G}`,key:`tab-${h}`,"aria-controls":`pane-${G}`,role:"tab","aria-selected":n.active,tabindex:Ce,onFocus:()=>se(),onBlur:()=>j(),onClick:A=>{j(),r("tabClick",n,G,A)},onKeydown:A=>{J&&(A.code===D.delete||A.code===D.backspace)&&r("tabRemove",n,A)}},[Ne,_e])});return f("div",{ref:m,class:[t.e("nav-wrap"),t.is("scrollable",!!v.value),t.is(i.props.tabPosition)]},[c,f("div",{class:t.e("nav-scroll"),ref:b},[f("div",{class:[t.e("nav"),t.is(i.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(i.props.tabPosition))],ref:g,style:s.value,role:"tablist",onKeydown:ge},[e.type?null:f(Ye,{ref:p,tabs:[...e.panes]},null),d])])])}}}),tt=K({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Z(Function),default:()=>!0},stretch:Boolean}),Y=e=>Ae(e)||Fe(e),at={[me]:e=>Y(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>Y(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>Y(e),tabAdd:()=>!0};var st=F({name:"ElTabs",props:tt,emits:at,setup(e,{emit:a,slots:r,expose:u}){var i,t;const o=U("tabs"),{children:$,addChild:b,removeChild:g}=We(q(),"ElTabPane"),m=E(),p=E((t=(i=e.modelValue)!=null?i:e.activeName)!=null?t:"0"),v=s=>{p.value=s,a(me,s),a("tabChange",s)},l=async s=>{var y,N,z;if(!(p.value===s||ne(s)))try{await((y=e.beforeLeave)==null?void 0:y.call(e,s,p.value))!==!1&&(v(s),(z=(N=m.value)==null?void 0:N.removeFocus)==null||z.call(N))}catch{}},k=(s,y,N)=>{s.props.disabled||(l(y),a("tabClick",s,N))},S=(s,y)=>{s.props.disabled||ne(s.props.name)||(y.stopPropagation(),a("edit",s.props.name,"remove"),a("tabRemove",s.props.name))},w=()=>{a("edit",void 0,"add"),a("tabAdd")};return we({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},M(()=>!!e.activeName)),R(()=>e.activeName,s=>l(s)),R(()=>e.modelValue,s=>l(s)),R(p,async()=>{var s;await te(),(s=m.value)==null||s.scrollToActiveTab()}),ze(H,{props:e,currentName:p,registerPane:b,unregisterPane:g}),u({currentName:p}),()=>{const s=e.editable||e.addable?f("span",{class:o.e("new-tab"),tabindex:"0",onClick:w,onKeydown:z=>{z.code===D.enter&&w()}},[f(V,{class:o.is("icon-plus")},{default:()=>[f($e,null,null)]})]):null,y=f("div",{class:[o.e("header"),o.is(e.tabPosition)]},[s,f(et,{ref:m,currentName:p.value,editable:e.editable,type:e.type,panes:$.value,stretch:e.stretch,onTabClick:k,onTabRemove:S},null)]),N=f("div",{class:o.e("content")},[fe(r,"default")]);return f("div",{class:[o.b(),o.m(e.tabPosition),{[o.m("card")]:e.type==="card",[o.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[y,N]:[N,y]])}}});const nt=K({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),ot=["id","aria-hidden","aria-labelledby"],he="ElTabPane",lt=F({name:he}),rt=F({...lt,props:nt,setup(e){const a=e,r=q(),u=Me(),i=ee(H);i||ae(he,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const t=U("tab-pane"),o=E(),$=M(()=>a.closable||i.props.closable),b=oe(()=>{var l;return i.currentName.value===((l=a.name)!=null?l:o.value)}),g=E(b.value),m=M(()=>{var l;return(l=a.name)!=null?l:o.value}),p=oe(()=>!a.lazy||g.value||b.value);R(b,l=>{l&&(g.value=!0)});const v=Le({uid:r.uid,slots:u,props:a,paneName:m,active:b,index:o,isClosable:$});return ve(()=>{i.registerPane(v)}),Ve(()=>{i.unregisterPane(v.uid)}),(l,k)=>B(p)?De((ce(),ue("div",{key:0,id:`pane-${B(m)}`,class:de(B(t).b()),role:"tabpanel","aria-hidden":!B(b),"aria-labelledby":`tab-${B(m)}`},[fe(l.$slots,"default")],10,ot)),[[Ie,B(b)]]):Ke("v-if",!0)}});var ye=be(rt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const ut=Ue(st,{TabPane:ye}),dt=qe(ye);export{ut as E,dt as a};
