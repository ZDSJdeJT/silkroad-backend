var Tt=Object.defineProperty,Et=Object.defineProperties;var Rt=Object.getOwnPropertyDescriptors;var He=Object.getOwnPropertySymbols;var $t=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable;var Ve=(e,t,l)=>t in e?Tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,M=(e,t)=>{for(var l in t||(t={}))$t.call(t,l)&&Ve(e,l,t[l]);if(He)for(var l of He(t))Pt.call(t,l)&&Ve(e,l,t[l]);return e},U=(e,t)=>Et(e,Rt(t));import{Q as zt,a as Mt,b as Nt,c as je,d as Lt,e as Ke,f as At}from"./QInnerLoading.d4686c43.js";import{s as Ft,a as Ce,ac as _t,ad as xt,ae as Dt,f as z,d as T,af as qt,ag as Bt,ah as It,ai as Ot,aj as Ut,w as me,o as $e,a9 as We,a8 as Ge,t as Qt,h as C,ao as Ht,j as Se,e as at,a6 as _e,av as Vt,aw as lt,a7 as Ae,au as H,T as be,ax as jt,ay as Kt,q as xe,az as Ye,a2 as it,a4 as rt,aA as Wt,aB as Gt,a0 as Yt,ap as Xt,F as ee,H as K,J as I,I as w,aC as De,K as g,aD as we,aE as qe,aF as Be,Q as x,R as _,aG as Ne,W as st,aH as Ie,M as Pe,V as ze,P as ge,N as ae,aI as fe,aJ as Fe,aK as ut,aL as ct,aM as dt,aN as ft,aO as Jt,aP as Zt,aQ as eo,aR as to,aS as oo,aT as no,aU as ao,aV as lo,aW as io,aX as ro,aY as Xe,aZ as so,a_ as vt,$ as Re,a$ as uo,U as co,b0 as Je,b1 as fo}from"./index.9fac0909.js";import{F as vo,Q as ht}from"./FileSaver.min.ec60f04b.js";import{api as le}from"./axios.9322f6b6.js";import{u as ho,v as Ze,e as mo,f as po,g as go,r as et,s as yo,p as tt,h as bo,b as ue,a as ve,Q as wo,d as Co,c as Z}from"./QBtnDropdown.68d14a35.js";import{d as So}from"./i18n.245c34f0.js";import{c as ot}from"./selection.11d085bb.js";const ie="/public",ko=async()=>await le.get(`${ie}/settings`),To=async e=>await le.post(`${ie}/upload/texts`,e),Eo=async(e,t)=>await le.post(`${ie}/upload/files/${e}`,t),Ro=async(e,t)=>await le.post(`${ie}/upload/files/merge/${e}`,t),$o=async e=>await le.delete(`${ie}/records/${e}`),Po=async e=>await le.get(`${ie}/records/${e}`),zo=async e=>await le.get(`${ie}/receive/texts/${e}`),Mo=async(e,t,l)=>{const r=await le.get(`${ie}/receive/files/${e}`,{responseType:"blob",onDownloadProgress:l}),c=new Blob([r],{type:"application/octet-stream"});vo.exports.saveAs(c,t)};function mt(e,t){if(t&&e===t)return null;const l=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(l)===!0)return e;const r=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,c=r.display;return c==="block"||c==="table"?e:mt(e.parentNode)}function Le(e,t,l){return!e||e===document.body?!1:l===!0&&e===t||(t===document?document.body:t).contains(e.parentNode)}function pt(e,t,l){if(l||(l=document.createRange(),l.selectNode(e),l.setStart(e,0)),t.count===0)l.setEnd(e,t.count);else if(t.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<t.count?t.count-=e.textContent.length:(l.setEnd(e,t.count),t.count=0);else for(let r=0;t.count!==0&&r<e.childNodes.length;r++)l=pt(e.childNodes[r],t,l);return l}const No=/^https?:\/\//;class Lo{constructor(t,l){this.el=t,this.eVm=l,this._range=null}get selection(){if(this.el){const t=document.getSelection();if(Le(t.anchorNode,this.el,!0)&&Le(t.focusNode,this.el,!0))return t}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length>0:!1}get range(){const t=this.selection;return t!==null&&t.rangeCount?t.getRangeAt(0):this._range}get parent(){const t=this.range;if(t!==null){const l=t.startContainer;return l.nodeType===document.ELEMENT_NODE?l:l.parentNode}return null}get blockParent(){const t=this.parent;return t!==null?mt(t,this.el):null}save(t=this.range){t!==null&&(this._range=t)}restore(t=this._range){const l=document.createRange(),r=document.getSelection();t!==null?(l.setStart(t.startContainer,t.startOffset),l.setEnd(t.endContainer,t.endOffset),r.removeAllRanges(),r.addRange(l)):(r.selectAllChildren(this.el),r.collapseToEnd())}savePosition(){let t=-1,l;const r=document.getSelection(),c=this.el.parentNode;if(r.focusNode&&Le(r.focusNode,c))for(l=r.focusNode,t=r.focusOffset;l&&l!==c;)l!==this.el&&l.previousSibling?(l=l.previousSibling,t+=l.textContent.length):l=l.parentNode;this.savedPos=t}restorePosition(t=0){if(this.savedPos>0&&this.savedPos<t){const l=window.getSelection(),r=pt(this.el,{count:this.savedPos});r&&(r.collapse(!1),l.removeAllRanges(),l.addRange(r))}}hasParent(t,l){const r=l?this.parent:this.blockParent;return r!==null?r.nodeName.toLowerCase()===t.toLowerCase():!1}hasParents(t,l,r=this.parent){return r===null?!1:t.includes(r.nodeName.toLowerCase())===!0?!0:l===!0?this.hasParents(t,l,r.parentNode):!1}is(t,l){if(this.selection===null)return!1;switch(t){case"formatBlock":return l==="DIV"&&this.parent===this.el||this.hasParent(l,l==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(t)===l;case"fontName":const r=document.queryCommandValue(t);return r===`"${l}"`||r===l;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const c=document.queryCommandState(t);return l!==void 0?c===l:c}}getParentAttribute(t){return this.parent!==null?this.parent.getAttribute(t):null}can(t){if(t==="outdent")return this.hasParents(["blockquote","li"],!0);if(t==="indent")return this.hasParents(["li"],!0);if(t==="link")return this.selection!==null||this.is("link")}apply(t,l,r=Ft){if(t==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(l)&&this.is(t,l)&&(t="outdent",l=null),l==="PRE"&&this.is(t,"PRE")&&(l="P");else if(t==="print"){r();const c=window.open();c.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),c.print(),c.close();return}else if(t==="link"){const c=this.getParentAttribute("href");if(c===null){const d=this.selectWord(this.selection),n=d?d.toString():"";if(!n.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=No.test(n)?n:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(d.getRangeAt(0))}else this.eVm.editLinkUrl.value=c,this.range.selectNodeContents(this.parent),this.save();return}else if(t==="fullscreen"){this.eVm.toggleFullscreen(),r();return}else if(t==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),r();return}document.execCommand(t,!1,l),r()}selectWord(t){if(t===null||t.isCollapsed!==!0||t.modify===void 0)return t;const l=document.createRange();l.setStart(t.anchorNode,t.anchorOffset),l.setEnd(t.focusNode,t.focusOffset);const r=l.collapsed?["backward","forward"]:["forward","backward"];l.detach();const c=t.focusNode,d=t.focusOffset;return t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",r[0],"character"),t.modify("move",r[1],"word"),t.extend(c,d),t.modify("extend",r[1],"character"),t.modify("extend",r[0],"word"),t}}var Ao=Ce({name:"QTooltip",inheritAttrs:!1,props:U(M(M(M({},ho),_t),xt),{maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Ze},self:{type:String,default:"top middle",validator:Ze},offset:{type:Array,default:()=>[14,14],validator:mo},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}}),emits:[...Dt],setup(e,{slots:t,emit:l,attrs:r}){let c,d;const n=Se(),{proxy:{$q:o}}=n,a=z(null),i=z(!1),s=T(()=>tt(e.anchor,o.lang.rtl)),v=T(()=>tt(e.self,o.lang.rtl)),u=T(()=>e.persistent!==!0),{registerTick:f,removeTick:p}=qt(),{registerTimeout:y,removeTimeout:b}=Bt(),{transition:k,transitionStyle:E}=It(e,i),{localScrollTarget:L,changeScrollEvent:$,unconfigureScrollTarget:F}=po(e,se),{anchorEl:N,canShow:P,anchorEvents:O}=go({showing:i,configureAnchorEl:re}),{show:V,hide:te}=Ot({showing:i,canShow:P,handleShow:J,handleHide:ne,hideOnRouteChange:u,processOnMount:!0});Object.assign(O,{delayShow:D,delayHide:Q});const{showPortal:Y,hidePortal:X,renderPortal:W}=Ut(n,a,pe);if(o.platform.is.mobile===!0){const A={anchorEl:N,innerRef:a,onClickOutside(G){return te(G),G.target.classList.contains("q-dialog__backdrop")&&_e(G),!0}},j=T(()=>e.modelValue===null&&e.persistent!==!0&&i.value===!0);me(j,G=>{(G===!0?bo:et)(A)}),$e(()=>{et(A)})}function J(A){p(),b(),Y(),f(()=>{d=new MutationObserver(()=>S()),d.observe(a.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),S(),se()}),c===void 0&&(c=me(()=>o.screen.width+"|"+o.screen.height+"|"+e.self+"|"+e.anchor+"|"+o.lang.rtl,S)),y(()=>{Y(!0),l("show",A)},e.transitionDuration)}function ne(A){p(),b(),X(),de(),y(()=>{X(!0),l("hide",A)},e.transitionDuration)}function de(){d!==void 0&&(d.disconnect(),d=void 0),c!==void 0&&(c(),c=void 0),F(),We(O,"tooltipTemp")}function S(){const A=a.value;N.value===null||!A||yo({el:A,offset:e.offset,anchorEl:N.value,anchorOrigin:s.value,selfOrigin:v.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function D(A){if(o.platform.is.mobile===!0){ot(),document.body.classList.add("non-selectable");const j=N.value,G=["touchmove","touchcancel","touchend","click"].map(Te=>[j,Te,"delayHide","passiveCapture"]);Ge(O,"tooltipTemp",G)}y(()=>{V(A)},e.delay)}function Q(A){b(),o.platform.is.mobile===!0&&(We(O,"tooltipTemp"),ot(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),y(()=>{te(A)},e.hideDelay)}function re(){if(e.noParentEvent===!0||N.value===null)return;const A=o.platform.is.mobile===!0?[[N.value,"touchstart","delayShow","passive"]]:[[N.value,"mouseenter","delayShow","passive"],[N.value,"mouseleave","delayHide","passive"]];Ge(O,"anchor",A)}function se(){if(N.value!==null||e.scrollTarget!==void 0){L.value=Qt(N.value,e.scrollTarget);const A=e.noParentEvent===!0?S:te;$(L.value,A)}}function ke(){return i.value===!0?C("div",U(M({},r),{ref:a,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",r.class],style:[r.style,E.value],role:"complementary"}),at(t.default)):null}function pe(){return C(Ht,{name:k.value,appear:!0},ke)}return $e(de),Object.assign(n.proxy,{updatePosition:S}),W}});function gt(e,t,l){t.handler?t.handler(e,l,l.caret):l.runCmd(t.cmd,t.param)}function Oe(e){return C("div",{class:"q-editor__toolbar-group"},e)}function yt(e,t,l,r=!1){const c=r||(t.type==="toggle"?t.toggled?t.toggled(e):t.cmd&&e.caret.is(t.cmd,t.param):!1),d=[];if(t.tip&&e.$q.platform.is.desktop){const n=t.key?C("div",[C("small",`(CTRL + ${String.fromCharCode(t.key)})`)]):null;d.push(C(Ao,{delay:1e3},()=>[C("div",{innerHTML:t.tip}),n]))}return C(H,U(M({},e.buttonProps.value),{icon:t.icon!==null?t.icon:void 0,color:c?t.toggleColor||e.props.toolbarToggleColor:t.color||e.props.toolbarColor,textColor:c&&!e.props.toolbarPush?null:t.textColor||e.props.toolbarTextColor,label:t.label,disable:t.disable?typeof t.disable=="function"?t.disable(e):!0:!1,size:"sm",onClick(n){l&&l(),gt(n,t,e)}}),()=>d)}function Fo(e,t){const l=t.list==="only-icons";let r=t.label,c=t.icon!==null?t.icon:void 0,d,n;function o(){i.component.proxy.hide()}if(l)n=t.options.map(s=>{const v=s.type===void 0?e.caret.is(s.cmd,s.param):!1;return v&&(r=s.tip,c=s.icon!==null?s.icon:void 0),yt(e,s,o,v)}),d=e.toolbarBackgroundClass.value,n=[Oe(n)];else{const s=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,v=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,u=t.list==="no-icons";n=t.options.map(f=>{const p=f.disable?f.disable(e):!1,y=f.type===void 0?e.caret.is(f.cmd,f.param):!1;y&&(r=f.tip,c=f.icon!==null?f.icon:void 0);const b=f.htmlTip;return C(ve,{active:y,activeClass:s,clickable:!0,disable:p,dense:!0,onClick(k){o(),e.contentRef.value!==null&&e.contentRef.value.focus(),e.caret.restore(),gt(k,f,e)}},()=>[u===!0?null:C(ue,{class:y?s:v,side:!0},()=>C(be,{name:f.icon!==null?f.icon:void 0})),C(ue,b?()=>C("div",{class:"text-no-wrap",innerHTML:f.htmlTip}):f.tip?()=>C("div",{class:"text-no-wrap"},f.tip):void 0)])}),d=[e.toolbarBackgroundClass.value,v]}const a=t.highlight&&r!==t.label,i=C(wo,U(M({},e.buttonProps.value),{noCaps:!0,noWrap:!0,color:a?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:a&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:t.fixedLabel?t.label:r,icon:t.fixedIcon?t.icon!==null?t.icon:void 0:c,contentClass:d}),()=>n);return i}function _o(e){if(e.caret)return e.buttons.value.filter(t=>!e.isViewingSource.value||t.find(l=>l.cmd==="viewsource")).map(t=>Oe(t.map(l=>e.isViewingSource.value&&l.cmd!=="viewsource"?!1:l.type==="slot"?at(e.slots[l.slot]):l.type==="dropdown"?Fo(e,l):yt(e,l))))}function xo(e,t,l,r={}){const c=Object.keys(r);if(c.length===0)return{};const d={default_font:{cmd:"fontName",param:e,icon:l,tip:t}};return c.forEach(n=>{const o=r[n];d[n]={cmd:"fontName",param:o,icon:l,tip:o,htmlTip:`<font face="${o}">${o}</font>`}}),d}function Do(e){if(e.caret){const t=e.props.toolbarColor||e.props.toolbarTextColor;let l=e.editLinkUrl.value;const r=()=>{e.caret.restore(),l!==e.editLinkUrl.value&&document.execCommand("createLink",!1,l===""?" ":l),e.editLinkUrl.value=null};return[C("div",{class:`q-mx-xs text-${t}`},`${e.$q.lang.editor.url}: `),C("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:l,onInput:c=>{Vt(c),l=c.target.value},onKeydown:c=>{if(lt(c)!==!0)switch(c.keyCode){case 13:return Ae(c),r();case 27:Ae(c),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),Oe([C(H,U(M({key:"qedt_btm_rem",tabindex:-1},e.buttonProps.value),{label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}})),C(H,U(M({key:"qedt_btm_upd"},e.buttonProps.value),{label:e.$q.lang.label.update,noCaps:!0,onClick:r}))])]}}let ye=0;const qo={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Bo=["update:fullscreen","fullscreen"];function Io(){const e=Se(),{props:t,emit:l,proxy:r}=e;let c,d,n;const o=z(!1);jt(e)===!0&&me(()=>r.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&s()}),me(()=>t.fullscreen,v=>{o.value!==v&&a()}),me(o,v=>{l("update:fullscreen",v),l("fullscreen",v)});function a(){o.value===!0?s():i()}function i(){o.value!==!0&&(o.value=!0,n=r.$el.parentNode,n.replaceChild(d,r.$el),document.body.appendChild(r.$el),ye++,ye===1&&document.body.classList.add("q-body--fullscreen-mixin"),c={handler:s},Ye.add(c))}function s(){o.value===!0&&(c!==void 0&&(Ye.remove(c),c=void 0),n.replaceChild(r.$el,d),o.value=!1,ye=Math.max(0,ye-1),ye===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),r.$el.scrollIntoView!==void 0&&setTimeout(()=>{r.$el.scrollIntoView()})))}return Kt(()=>{d=document.createElement("span")}),xe(()=>{t.fullscreen===!0&&i()}),$e(s),Object.assign(r,{toggleFullscreen:a,setFullscreen:i,exitFullscreen:s}),{inFullscreen:o,toggleFullscreen:a}}var Oo=Ce({name:"QEditor",props:U(M(M({},it),qo),{modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(t=>t.length),default(){return[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]}},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean}),emits:[...Bo,"update:modelValue","keydown","click","mouseup","keyup","touchend","focus","blur"],setup(e,{slots:t,emit:l,attrs:r}){const{proxy:c,vnode:d}=Se(),{$q:n}=c,o=rt(e,n),{inFullscreen:a,toggleFullscreen:i}=Io(),s=Wt(r,d),v=z(null),u=z(null),f=z(null),p=z(!1),y=T(()=>!e.readonly&&!e.disable);let b,k,E=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),b=window.getComputedStyle(document.body).fontFamily;const L=T(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),$=T(()=>{const h=e.toolbarOutline!==!0&&e.toolbarPush!==!0;return{type:"a",flat:h,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!y.value,size:"sm"}}),F=T(()=>{const h=n.lang.editor,m=n.iconSet.editor;return{bold:{cmd:"bold",icon:m.bold,tip:h.bold,key:66},italic:{cmd:"italic",icon:m.italic,tip:h.italic,key:73},strike:{cmd:"strikeThrough",icon:m.strikethrough,tip:h.strikethrough,key:83},underline:{cmd:"underline",icon:m.underline,tip:h.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:m.unorderedList,tip:h.unorderedList},ordered:{cmd:"insertOrderedList",icon:m.orderedList,tip:h.orderedList},subscript:{cmd:"subscript",icon:m.subscript,tip:h.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:m.superscript,tip:h.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:R=>R.caret&&!R.caret.can("link"),icon:m.hyperlink,tip:h.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:m.toggleFullscreen,tip:h.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:m.viewSource,tip:h.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:m.quote,tip:h.quote,key:81},left:{cmd:"justifyLeft",icon:m.left,tip:h.left},center:{cmd:"justifyCenter",icon:m.center,tip:h.center},right:{cmd:"justifyRight",icon:m.right,tip:h.right},justify:{cmd:"justifyFull",icon:m.justify,tip:h.justify},print:{type:"no-state",cmd:"print",icon:m.print,tip:h.print,key:80},outdent:{type:"no-state",disable:R=>R.caret&&!R.caret.can("outdent"),cmd:"outdent",icon:m.outdent,tip:h.outdent},indent:{type:"no-state",disable:R=>R.caret&&!R.caret.can("indent"),cmd:"indent",icon:m.indent,tip:h.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:m.removeFormat,tip:h.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:m.hr,tip:h.hr},undo:{type:"no-state",cmd:"undo",icon:m.undo,tip:h.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:m.redo,tip:h.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:m.heading1||m.heading,tip:h.heading1,htmlTip:`<h1 class="q-ma-none">${h.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:m.heading2||m.heading,tip:h.heading2,htmlTip:`<h2 class="q-ma-none">${h.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:m.heading3||m.heading,tip:h.heading3,htmlTip:`<h3 class="q-ma-none">${h.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:m.heading4||m.heading,tip:h.heading4,htmlTip:`<h4 class="q-ma-none">${h.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:m.heading5||m.heading,tip:h.heading5,htmlTip:`<h5 class="q-ma-none">${h.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:m.heading6||m.heading,tip:h.heading6,htmlTip:`<h6 class="q-ma-none">${h.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:m.heading,tip:h.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:m.code,htmlTip:`<code>${h.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:m.size1||m.size,tip:h.size1,htmlTip:`<font size="1">${h.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:m.size2||m.size,tip:h.size2,htmlTip:`<font size="2">${h.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:m.size3||m.size,tip:h.size3,htmlTip:`<font size="3">${h.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:m.size4||m.size,tip:h.size4,htmlTip:`<font size="4">${h.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:m.size5||m.size,tip:h.size5,htmlTip:`<font size="5">${h.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:m.size6||m.size,tip:h.size6,htmlTip:`<font size="6">${h.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:m.size7||m.size,tip:h.size7,htmlTip:`<font size="7">${h.size7}</font>`}}}),N=T(()=>{const h=e.definitions||{},m=e.definitions||e.fonts?Gt(!0,{},F.value,h,xo(b,n.lang.editor.defaultFont,n.iconSet.editor.font,e.fonts)):F.value;return e.toolbar.map(R=>R.map(q=>{if(q.options)return{type:"dropdown",icon:q.icon,label:q.label,size:"sm",dense:!0,fixedLabel:q.fixedLabel,fixedIcon:q.fixedIcon,highlight:q.highlight,list:q.list,options:q.options.map(kt=>m[kt])};const oe=m[q];return oe?oe.type==="no-state"||h[q]&&(oe.cmd===void 0||F.value[oe.cmd]&&F.value[oe.cmd].type==="no-state")?oe:Object.assign({type:"toggle"},oe):{type:"slot",slot:q}}))}),P={$q:n,props:e,slots:t,inFullscreen:a,toggleFullscreen:i,runCmd:A,isViewingSource:p,editLinkUrl:f,toolbarBackgroundClass:L,buttonProps:$,contentRef:u,buttons:N,setContent:pe};me(()=>e.modelValue,h=>{E!==h&&(E=h,pe(h,!0))});const O=T(()=>e.toolbar&&e.toolbar.length>0),V=T(()=>{const h={},m=R=>{R.key&&(h[R.key]={cmd:R.cmd,param:R.param})};return N.value.forEach(R=>{R.forEach(q=>{q.options?q.options.forEach(m):m(q)})}),h}),te=T(()=>a.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),Y=T(()=>`q-editor q-editor--${p.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(a.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(o.value===!0?" q-editor--dark q-dark":"")),X=T(()=>[e.contentClass,"q-editor__content",{col:a.value,"overflow-auto":a.value||e.maxHeight}]),W=T(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});function J(){if(u.value!==null){const h=`inner${p.value===!0?"Text":"HTML"}`,m=u.value[h];m!==e.modelValue&&(E=m,l("update:modelValue",m))}}function ne(h){if(l("keydown",h),h.ctrlKey!==!0||lt(h)===!0){j();return}const m=h.keyCode,R=V.value[m];if(R!==void 0){const{cmd:q,param:oe}=R;_e(h),A(q,oe,!1)}}function de(h){j(),l("click",h)}function S(h){if(u.value!==null){const{scrollTop:m,scrollHeight:R}=u.value;k=R-m}P.caret.save(),l("blur",h)}function D(h){Yt(()=>{u.value!==null&&k!==void 0&&(u.value.scrollTop=u.value.scrollHeight-k)}),l("focus",h)}function Q(h){const m=v.value;if(m!==null&&m.contains(h.target)===!0&&(h.relatedTarget===null||m.contains(h.relatedTarget)!==!0)){const R=`inner${p.value===!0?"Text":"HTML"}`;P.caret.restorePosition(u.value[R].length),j()}}function re(h){const m=v.value;m!==null&&m.contains(h.target)===!0&&(h.relatedTarget===null||m.contains(h.relatedTarget)!==!0)&&(P.caret.savePosition(),j())}function se(){k=void 0}function ke(h){P.caret.save()}function pe(h,m){if(u.value!==null){m===!0&&P.caret.savePosition();const R=`inner${p.value===!0?"Text":"HTML"}`;u.value[R]=h,m===!0&&(P.caret.restorePosition(u.value[R].length),j())}}function A(h,m,R=!0){G(),P.caret.restore(),P.caret.apply(h,m,()=>{G(),P.caret.save(),R&&j()})}function j(){setTimeout(()=>{f.value=null,c.$forceUpdate()},1)}function G(){Xt(()=>{u.value!==null&&u.value.focus({preventScroll:!0})})}function Te(){return u.value}return xe(()=>{P.caret=c.caret=new Lo(u.value,P),pe(e.modelValue),j(),document.addEventListener("selectionchange",ke)}),$e(()=>{document.removeEventListener("selectionchange",ke)}),Object.assign(c,{runCmd:A,refreshToolbar:j,focus:G,getContentEl:Te}),()=>{let h;if(O.value){const m=[C("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+L.value},_o(P))];f.value!==null&&m.push(C("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+L.value},Do(P))),h=C("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},m)}return C("div",U(M({ref:v,class:Y.value,style:{height:a.value===!0?"100%":null}},W.value),{onFocusin:Q,onFocusout:re}),[h,C("div",U(M({ref:u,style:te.value,class:X.value,contenteditable:y.value,placeholder:e.placeholder},s.listeners.value),{onInput:J,onKeydown:ne,onClick:de,onBlur:S,onFocus:D,onMousedown:se,onTouchstartPassive:se}))])}}});const bt=ee({__name:"RichTextEditor",props:{text:{type:String,required:!0},readonly:{type:Boolean,required:!1,default:!1}},emits:["update:text"],setup(e,{emit:t}){const l=z(),r=n=>{if(!!n){for(let o=0;o<n.items.length;o++)if(n.items[o].type==="text/plain")l.value.runCmd("insertText",n.getData("text/plain"));else if(n.items[o].type.startsWith("image/")){const a=n.items[o].getAsFile();if(a){const i=new FileReader;i.readAsDataURL(a),i.onloadend=()=>{const s=i.result;l.value.runCmd("insertImage",s)}}}}},c=n=>{n.preventDefault(),n.stopPropagation(),r(n.clipboardData)},d=n=>{n.preventDefault(),n.stopPropagation(),r(n.dataTransfer)};return(n,o)=>(I(),K(Oo,{ref_key:"editorRef",ref:l,readonly:e.readonly,"model-value":e.text,"onUpdate:modelValue":o[0]||(o[0]=a=>t("update:text",a)),class:"tw-w-full",dense:n.$q.screen.lt.md,placeholder:`${n.$t("forms.placeholders.richText")} *`,onPaste:o[1]||(o[1]=a=>c(a)),onDrop:o[2]||(o[2]=a=>d(a)),toolbar:[[{label:n.$q.lang.editor.align,icon:n.$q.iconSet.editor.align,fixedLabel:!0,options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:n.$q.lang.editor.formatting,icon:n.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:n.$q.lang.editor.fontSize,icon:n.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:n.$q.lang.editor.defaultFont,icon:n.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"],["viewsource"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["readonly","model-value","dense","placeholder","toolbar"]))}}),Uo=ee({__name:"ReceiveTextSuccessDialog",props:{isShow:{type:Boolean},text:{}},emits:["update:is-show"],setup(e,{emit:t}){return(l,r)=>(I(),K(De,{"model-value":l.isShow,persistent:""},{default:w(()=>[g(Ne,{flat:"",bordered:""},{default:w(()=>[g(we,null,{default:w(()=>[g(bt,{text:l.text,readonly:""},null,8,["text"])]),_:1}),g(qe),g(Be,null,{default:w(()=>[g(H,{onClick:r[0]||(r[0]=c=>t("update:is-show",!1)),flat:""},{default:w(()=>[x(_(l.$t("buttons.close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),Qo=ee({__name:"ReceiveDialog",props:{isShow:{type:Boolean},record:{}},emits:["update:is-show"],setup(e,{emit:t}){const l=e,r=st(),c=Ie({useScope:"global"}),d=T(()=>{var u,f;return new Date((u=l.record)==null?void 0:u.expireAt).toLocaleString((f=localStorage.language)!=null?f:So)}),n=z(!1),o=z(""),a=z(!1),i=async u=>{if(u.filename){t("update:is-show",!1);const f=r.dialog({message:`${c.t("dialogs.downloading")}... 0%`,progress:!0,persistent:!0,ok:!1});try{await Mo(u.code,u.filename,p=>{var b;const y=Math.round(p.loaded*100/((b=p.total)!=null?b:p.loaded));f.update({message:`${c.t("dialogs.downloading")}... ${y}%`})}),ae.create({message:c.t("notify.receiveSuccess"),position:"top",type:"positive"})}finally{f.hide()}return}try{a.value=!0;const f=await zo(u.code);ae.create({message:f.message,position:"top",type:"positive"}),o.value=f.result,n.value=!0}finally{a.value=!1,t("update:is-show",!1)}},s=z(!1),v=async u=>{s.value=!0;try{const f=await $o(u);ae.create({message:f.message,position:"top",type:"positive"})}finally{s.value=!1,t("update:is-show",!1)}};return(u,f)=>(I(),Pe(ze,null,[g(Uo,{"is-show":n.value,"onUpdate:isShow":f[0]||(f[0]=p=>n.value=p),text:o.value},null,8,["is-show","text"]),g(De,{"model-value":u.isShow,persistent:""},{default:w(()=>[g(Ne,{flat:"",bordered:""},{default:w(()=>[g(we,{class:"tw-text-2xl"},{default:w(()=>[g(Co,{bordered:"",separator:""},{default:w(()=>[u.record.filename?(I(),Pe(ze,{key:0},[ge((I(),K(ve,{clickable:""},{default:w(()=>[g(ue,null,{default:w(()=>[g(Z,{overline:""},{default:w(()=>[x(_(u.$t("dialogs.type")),1)]),_:1}),g(Z,null,{default:w(()=>[x(_(u.$t("dialogs.file")),1)]),_:1})]),_:1})]),_:1})),[[fe]]),ge((I(),K(ve,{clickable:""},{default:w(()=>[g(ue,null,{default:w(()=>[g(Z,{overline:""},{default:w(()=>[x(_(u.$t("dialogs.filename")),1)]),_:1}),g(Z,null,{default:w(()=>[x(_(u.record.filename),1)]),_:1})]),_:1})]),_:1})),[[fe]])],64)):ge((I(),K(ve,{key:1,clickable:""},{default:w(()=>[g(ue,null,{default:w(()=>[g(Z,{overline:""},{default:w(()=>[x(_(u.$t("dialogs.type")),1)]),_:1}),g(Z,null,{default:w(()=>[x(_(u.$t("dialogs.text")),1)]),_:1})]),_:1})]),_:1})),[[fe]]),ge((I(),K(ve,{clickable:""},{default:w(()=>[g(ue,null,{default:w(()=>[g(Z,{overline:""},{default:w(()=>[x(_(u.$t("dialogs.expireAt")),1)]),_:1}),g(Z,null,{default:w(()=>[x(_(d.value),1)]),_:1})]),_:1})]),_:1})),[[fe]]),ge((I(),K(ve,{clickable:""},{default:w(()=>[g(ue,null,{default:w(()=>[g(Z,{overline:""},{default:w(()=>[x(_(u.$t("dialogs.remainingDownloadTimes")),1)]),_:1}),g(Z,null,{default:w(()=>[x(_(u.record.downloadTimes===0?"\u221E":u.record.downloadTimes),1)]),_:1})]),_:1})]),_:1})),[[fe]])]),_:1})]),_:1}),g(qe),g(Be,null,{default:w(()=>[g(H,{onClick:f[1]||(f[1]=p=>i(u.record)),loading:a.value,flat:"",color:"primary"},{default:w(()=>[x(_(u.$t("buttons.receive")),1)]),_:1},8,["loading"]),g(H,{onClick:f[2]||(f[2]=p=>t("update:is-show",!1)),flat:""},{default:w(()=>[x(_(u.$t("buttons.cancel")),1)]),_:1}),g(H,{onClick:f[3]||(f[3]=p=>v(u.record.id)),loading:s.value,flat:"",color:"negative"},{default:w(()=>[x(_(u.$t("buttons.destroy")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["model-value"])],64))}}),Ho=ee({__name:"ReceiveForm",setup(e){const t=z(!1),l={receiveCode:""},r=z(M({},l)),c=z(!1),d=z(null),n=async()=>{t.value=!0;try{const v=await Po(r.value.receiveCode);d.value=v.result,c.value=!0}finally{t.value=!1}},o=()=>{r.value=M({},l)},a=new URL(window.location.href),s=new URLSearchParams(a.search).get("receive_code");return s&&(r.value.receiveCode=s,n()),(v,u)=>(I(),Pe(ze,null,[g(Qo,{"is-show":c.value,"onUpdate:isShow":u[0]||(u[0]=f=>c.value=f),record:d.value},null,8,["is-show","record"]),g(ht,{onSubmit:n,onReset:o,class:"q-gutter-md"},{default:w(()=>[g(Fe,{filled:"",modelValue:r.value.receiveCode,"onUpdate:modelValue":u[1]||(u[1]=f=>r.value.receiveCode=f),label:`${v.$t("forms.labels.receiveCode")} *`,"lazy-rules":"",rules:[f=>f.length>0||v.$t("forms.rules.notEmpty",{label:v.$t("forms.labels.receiveCode")})]},null,8,["modelValue","label","rules"]),g(H,{loading:t.value,label:v.$t("buttons.submit"),type:"submit",color:"primary"},null,8,["loading","label"]),g(H,{label:v.$t("buttons.reset"),type:"reset"},null,8,["label"])]),_:1})],64))}});var Vo=Ce({name:"QField",inheritAttrs:!1,props:ut,emits:ct,setup(){return dt(ft())}});const jo={xs:8,sm:10,md:14,lg:20,xl:24};var Ko=Ce({name:"QChip",props:U(M(M({},it),Jt),{dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}}),emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:l}){const{proxy:{$q:r}}=Se(),c=rt(e,r),d=Zt(e,jo),n=T(()=>e.selected===!0||e.icon!==void 0),o=T(()=>e.selected===!0?e.iconSelected||r.iconSet.chip.selected:e.icon),a=T(()=>e.iconRemove||r.iconSet.chip.remove),i=T(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),s=T(()=>{const b=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(b?` text-${b} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(i.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(c.value===!0?" q-chip--dark q-dark":"")}),v=T(()=>e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0});function u(b){b.keyCode===13&&f(b)}function f(b){e.disable||(l("update:selected",!e.selected),l("click",b))}function p(b){(b.keyCode===void 0||b.keyCode===13)&&(_e(b),e.disable===!1&&(l("update:modelValue",!1),l("remove")))}function y(){const b=[];i.value===!0&&b.push(C("div",{class:"q-focus-helper"})),n.value===!0&&b.push(C(be,{class:"q-chip__icon q-chip__icon--left",name:o.value}));const k=e.label!==void 0?[C("div",{class:"ellipsis"},[e.label])]:void 0;return b.push(C("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},to(t.default,k))),e.iconRight&&b.push(C(be,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&b.push(C(be,U(M({class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:a.value},v.value),{onClick:p,onKeyup:p}))),b}return()=>{if(e.modelValue===!1)return;const b={class:s.value,style:d.value};return i.value===!0&&Object.assign(b,v.value,{onClick:f,onKeyup:u}),eo("div",b,y(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[fe,e.ripple]])}}}),Wo=Ce({name:"QFile",inheritAttrs:!1,props:U(M(M(M({},ut),oo),no),{modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]}),emits:[...ct,...ao],setup(e,{slots:t,emit:l,attrs:r}){const{proxy:c}=Se(),d=ft(),n=z(null),o=z(!1),a=lo(e),{pickFiles:i,onDragover:s,onDragleave:v,processFiles:u,getDndNode:f}=io({editable:d.editable,dnd:o,getFileInput:X,addFilesToQueue:W}),p=ro(e),y=T(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),b=T(()=>Xe(y.value)),k=T(()=>y.value.map(S=>S.name).join(", ")),E=T(()=>so(y.value.reduce((S,D)=>S+D.size,0))),L=T(()=>({totalSize:E.value,filesNumber:y.value.length,maxFiles:e.maxFiles})),$=T(()=>U(M({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:a.value},r),{id:d.targetUid.value,disabled:d.editable.value!==!0})),F=T(()=>"q-file q-field--auto-height"+(o.value===!0?" q-file--dnd":"")),N=T(()=>e.multiple===!0&&e.append===!0);function P(S){const D=y.value.slice();D.splice(S,1),V(D)}function O(S){const D=y.value.findIndex(S);D>-1&&P(D)}function V(S){l("update:modelValue",e.multiple===!0?S:S[0])}function te(S){S.keyCode===13&&Ae(S)}function Y(S){(S.keyCode===13||S.keyCode===32)&&i(S)}function X(){return n.value}function W(S,D){const Q=u(S,D,y.value,N.value),re=X();re!=null&&(re.value=""),Q!==void 0&&((e.multiple===!0?e.modelValue&&Q.every(se=>y.value.includes(se)):e.modelValue===Q[0])||V(N.value===!0?y.value.concat(Q):Q))}function J(){return[C("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function ne(){if(t.file!==void 0)return y.value.length===0?J():y.value.map((D,Q)=>t.file({index:Q,file:D,ref:this}));if(t.selected!==void 0)return y.value.length===0?J():t.selected({files:y.value,ref:this});if(e.useChips===!0)return y.value.length===0?J():y.value.map((D,Q)=>C(Ko,{key:"file-"+Q,removable:d.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{P(Q)}},()=>C("span",{class:"ellipsis",textContent:D.name})));const S=e.displayValue!==void 0?e.displayValue:k.value;return S.length>0?[C("div",{class:e.inputClass,style:e.inputStyle,textContent:S})]:J()}function de(){const S=U(M(M({ref:n},$.value),p.value),{class:"q-field__input fit absolute-full cursor-pointer",onChange:W});return e.multiple===!0&&(S.multiple=!0),C("input",S)}return Object.assign(d,{fieldClass:F,emitValue:V,hasValue:b,inputRef:n,innerValue:y,floatingLabel:T(()=>b.value===!0||Xe(e.displayValue)),computedCounter:T(()=>{if(e.counterLabel!==void 0)return e.counterLabel(L.value);const S=e.maxFiles;return`${y.value.length}${S!==void 0?" / "+S:""} (${E.value})`}),getControlChild:()=>f("file"),getControl:()=>{const S={ref:d.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return d.editable.value===!0&&Object.assign(S,{onDragover:s,onDragleave:v,onKeydown:te,onKeyup:Y}),C("div",S,[de()].concat(ne()))}}),Object.assign(c,{removeAtIndex:P,removeFile:O,getNativeElement:()=>n.value}),dt(d)}});/*!
 * qrcode.vue v3.4.0
 * A Vue.js component to generate QRCode.
 * Â© 2017-2023 @scopewu(https://github.com/scopewu)
 * MIT License.
 */var Me=function(){return Me=Object.assign||function(t){for(var l,r=1,c=arguments.length;r<c;r++){l=arguments[r];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(t[d]=l[d])}return t},Me.apply(this,arguments)},ce;(function(e){var t=function(){function n(o,a,i,s){if(this.version=o,this.errorCorrectionLevel=a,this.modules=[],this.isFunction=[],o<n.MIN_VERSION||o>n.MAX_VERSION)throw new RangeError("Version value out of range");if(s<-1||s>7)throw new RangeError("Mask value out of range");this.size=o*4+17;for(var v=[],u=0;u<this.size;u++)v.push(!1);for(var u=0;u<this.size;u++)this.modules.push(v.slice()),this.isFunction.push(v.slice());this.drawFunctionPatterns();var f=this.addEccAndInterleave(i);if(this.drawCodewords(f),s==-1)for(var p=1e9,u=0;u<8;u++){this.applyMask(u),this.drawFormatBits(u);var y=this.getPenaltyScore();y<p&&(s=u,p=y),this.applyMask(u)}c(0<=s&&s<=7),this.mask=s,this.applyMask(s),this.drawFormatBits(s),this.isFunction=[]}return n.encodeText=function(o,a){var i=e.QrSegment.makeSegments(o);return n.encodeSegments(i,a)},n.encodeBinary=function(o,a){var i=e.QrSegment.makeBytes(o);return n.encodeSegments([i],a)},n.encodeSegments=function(o,a,i,s,v,u){if(i===void 0&&(i=1),s===void 0&&(s=40),v===void 0&&(v=-1),u===void 0&&(u=!0),!(n.MIN_VERSION<=i&&i<=s&&s<=n.MAX_VERSION)||v<-1||v>7)throw new RangeError("Invalid value");var f,p;for(f=i;;f++){var y=n.getNumDataCodewords(f,a)*8,b=d.getTotalBits(o,f);if(b<=y){p=b;break}if(f>=s)throw new RangeError("Data too long")}for(var k=0,E=[n.Ecc.MEDIUM,n.Ecc.QUARTILE,n.Ecc.HIGH];k<E.length;k++){var L=E[k];u&&p<=n.getNumDataCodewords(f,L)*8&&(a=L)}for(var $=[],F=0,N=o;F<N.length;F++){var P=N[F];l(P.mode.modeBits,4,$),l(P.numChars,P.mode.numCharCountBits(f),$);for(var O=0,V=P.getData();O<V.length;O++){var te=V[O];$.push(te)}}c($.length==p);var Y=n.getNumDataCodewords(f,a)*8;c($.length<=Y),l(0,Math.min(4,Y-$.length),$),l(0,(8-$.length%8)%8,$),c($.length%8==0);for(var X=236;$.length<Y;X^=253)l(X,8,$);for(var W=[];W.length*8<$.length;)W.push(0);return $.forEach(function(J,ne){return W[ne>>>3]|=J<<7-(ne&7)}),new n(f,a,W,v)},n.prototype.getModule=function(o,a){return 0<=o&&o<this.size&&0<=a&&a<this.size&&this.modules[a][o]},n.prototype.getModules=function(){return this.modules},n.prototype.drawFunctionPatterns=function(){for(var o=0;o<this.size;o++)this.setFunctionModule(6,o,o%2==0),this.setFunctionModule(o,6,o%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var a=this.getAlignmentPatternPositions(),i=a.length,o=0;o<i;o++)for(var s=0;s<i;s++)o==0&&s==0||o==0&&s==i-1||o==i-1&&s==0||this.drawAlignmentPattern(a[o],a[s]);this.drawFormatBits(0),this.drawVersion()},n.prototype.drawFormatBits=function(o){for(var a=this.errorCorrectionLevel.formatBits<<3|o,i=a,s=0;s<10;s++)i=i<<1^(i>>>9)*1335;var v=(a<<10|i)^21522;c(v>>>15==0);for(var s=0;s<=5;s++)this.setFunctionModule(8,s,r(v,s));this.setFunctionModule(8,7,r(v,6)),this.setFunctionModule(8,8,r(v,7)),this.setFunctionModule(7,8,r(v,8));for(var s=9;s<15;s++)this.setFunctionModule(14-s,8,r(v,s));for(var s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,r(v,s));for(var s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,r(v,s));this.setFunctionModule(8,this.size-8,!0)},n.prototype.drawVersion=function(){if(!(this.version<7)){for(var o=this.version,a=0;a<12;a++)o=o<<1^(o>>>11)*7973;var i=this.version<<12|o;c(i>>>18==0);for(var a=0;a<18;a++){var s=r(i,a),v=this.size-11+a%3,u=Math.floor(a/3);this.setFunctionModule(v,u,s),this.setFunctionModule(u,v,s)}}},n.prototype.drawFinderPattern=function(o,a){for(var i=-4;i<=4;i++)for(var s=-4;s<=4;s++){var v=Math.max(Math.abs(s),Math.abs(i)),u=o+s,f=a+i;0<=u&&u<this.size&&0<=f&&f<this.size&&this.setFunctionModule(u,f,v!=2&&v!=4)}},n.prototype.drawAlignmentPattern=function(o,a){for(var i=-2;i<=2;i++)for(var s=-2;s<=2;s++)this.setFunctionModule(o+s,a+i,Math.max(Math.abs(s),Math.abs(i))!=1)},n.prototype.setFunctionModule=function(o,a,i){this.modules[a][o]=i,this.isFunction[a][o]=!0},n.prototype.addEccAndInterleave=function(o){var a=this.version,i=this.errorCorrectionLevel;if(o.length!=n.getNumDataCodewords(a,i))throw new RangeError("Invalid argument");for(var s=n.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][a],v=n.ECC_CODEWORDS_PER_BLOCK[i.ordinal][a],u=Math.floor(n.getNumRawDataModules(a)/8),f=s-u%s,p=Math.floor(u/s),y=[],b=n.reedSolomonComputeDivisor(v),k=0,E=0;k<s;k++){var L=o.slice(E,E+p-v+(k<f?0:1));E+=L.length;var $=n.reedSolomonComputeRemainder(L,b);k<f&&L.push(0),y.push(L.concat($))}for(var F=[],N=function(P){y.forEach(function(O,V){(P!=p-v||V>=f)&&F.push(O[P])})},k=0;k<y[0].length;k++)N(k);return c(F.length==u),F},n.prototype.drawCodewords=function(o){if(o.length!=Math.floor(n.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var a=0,i=this.size-1;i>=1;i-=2){i==6&&(i=5);for(var s=0;s<this.size;s++)for(var v=0;v<2;v++){var u=i-v,f=(i+1&2)==0,p=f?this.size-1-s:s;!this.isFunction[p][u]&&a<o.length*8&&(this.modules[p][u]=r(o[a>>>3],7-(a&7)),a++)}}c(a==o.length*8)},n.prototype.applyMask=function(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(var a=0;a<this.size;a++)for(var i=0;i<this.size;i++){var s=void 0;switch(o){case 0:s=(i+a)%2==0;break;case 1:s=a%2==0;break;case 2:s=i%3==0;break;case 3:s=(i+a)%3==0;break;case 4:s=(Math.floor(i/3)+Math.floor(a/2))%2==0;break;case 5:s=i*a%2+i*a%3==0;break;case 6:s=(i*a%2+i*a%3)%2==0;break;case 7:s=((i+a)%2+i*a%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[a][i]&&s&&(this.modules[a][i]=!this.modules[a][i])}},n.prototype.getPenaltyScore=function(){for(var o=0,a=0;a<this.size;a++){for(var i=!1,s=0,v=[0,0,0,0,0,0,0],u=0;u<this.size;u++)this.modules[a][u]==i?(s++,s==5?o+=n.PENALTY_N1:s>5&&o++):(this.finderPenaltyAddHistory(s,v),i||(o+=this.finderPenaltyCountPatterns(v)*n.PENALTY_N3),i=this.modules[a][u],s=1);o+=this.finderPenaltyTerminateAndCount(i,s,v)*n.PENALTY_N3}for(var u=0;u<this.size;u++){for(var i=!1,f=0,v=[0,0,0,0,0,0,0],a=0;a<this.size;a++)this.modules[a][u]==i?(f++,f==5?o+=n.PENALTY_N1:f>5&&o++):(this.finderPenaltyAddHistory(f,v),i||(o+=this.finderPenaltyCountPatterns(v)*n.PENALTY_N3),i=this.modules[a][u],f=1);o+=this.finderPenaltyTerminateAndCount(i,f,v)*n.PENALTY_N3}for(var a=0;a<this.size-1;a++)for(var u=0;u<this.size-1;u++){var p=this.modules[a][u];p==this.modules[a][u+1]&&p==this.modules[a+1][u]&&p==this.modules[a+1][u+1]&&(o+=n.PENALTY_N2)}for(var y=0,b=0,k=this.modules;b<k.length;b++){var E=k[b];y=E.reduce(function(F,N){return F+(N?1:0)},y)}var L=this.size*this.size,$=Math.ceil(Math.abs(y*20-L*10)/L)-1;return c(0<=$&&$<=9),o+=$*n.PENALTY_N4,c(0<=o&&o<=2568888),o},n.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var o=Math.floor(this.version/7)+2,a=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2,i=[6],s=this.size-7;i.length<o;s-=a)i.splice(1,0,s);return i},n.getNumRawDataModules=function(o){if(o<n.MIN_VERSION||o>n.MAX_VERSION)throw new RangeError("Version number out of range");var a=(16*o+128)*o+64;if(o>=2){var i=Math.floor(o/7)+2;a-=(25*i-10)*i-55,o>=7&&(a-=36)}return c(208<=a&&a<=29648),a},n.getNumDataCodewords=function(o,a){return Math.floor(n.getNumRawDataModules(o)/8)-n.ECC_CODEWORDS_PER_BLOCK[a.ordinal][o]*n.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][o]},n.reedSolomonComputeDivisor=function(o){if(o<1||o>255)throw new RangeError("Degree out of range");for(var a=[],i=0;i<o-1;i++)a.push(0);a.push(1);for(var s=1,i=0;i<o;i++){for(var v=0;v<a.length;v++)a[v]=n.reedSolomonMultiply(a[v],s),v+1<a.length&&(a[v]^=a[v+1]);s=n.reedSolomonMultiply(s,2)}return a},n.reedSolomonComputeRemainder=function(o,a){for(var i=a.map(function(p){return 0}),s=function(p){var y=p^i.shift();i.push(0),a.forEach(function(b,k){return i[k]^=n.reedSolomonMultiply(b,y)})},v=0,u=o;v<u.length;v++){var f=u[v];s(f)}return i},n.reedSolomonMultiply=function(o,a){if(o>>>8!=0||a>>>8!=0)throw new RangeError("Byte out of range");for(var i=0,s=7;s>=0;s--)i=i<<1^(i>>>7)*285,i^=(a>>>s&1)*o;return c(i>>>8==0),i},n.prototype.finderPenaltyCountPatterns=function(o){var a=o[1];c(a<=this.size*3);var i=a>0&&o[2]==a&&o[3]==a*3&&o[4]==a&&o[5]==a;return(i&&o[0]>=a*4&&o[6]>=a?1:0)+(i&&o[6]>=a*4&&o[0]>=a?1:0)},n.prototype.finderPenaltyTerminateAndCount=function(o,a,i){return o&&(this.finderPenaltyAddHistory(a,i),a=0),a+=this.size,this.finderPenaltyAddHistory(a,i),this.finderPenaltyCountPatterns(i)},n.prototype.finderPenaltyAddHistory=function(o,a){a[0]==0&&(o+=this.size),a.pop(),a.unshift(o)},n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n}();e.QrCode=t;function l(n,o,a){if(o<0||o>31||n>>>o!=0)throw new RangeError("Value out of range");for(var i=o-1;i>=0;i--)a.push(n>>>i&1)}function r(n,o){return(n>>>o&1)!=0}function c(n){if(!n)throw new Error("Assertion error")}var d=function(){function n(o,a,i){if(this.mode=o,this.numChars=a,this.bitData=i,a<0)throw new RangeError("Invalid argument");this.bitData=i.slice()}return n.makeBytes=function(o){for(var a=[],i=0,s=o;i<s.length;i++){var v=s[i];l(v,8,a)}return new n(n.Mode.BYTE,o.length,a)},n.makeNumeric=function(o){if(!n.isNumeric(o))throw new RangeError("String contains non-numeric characters");for(var a=[],i=0;i<o.length;){var s=Math.min(o.length-i,3);l(parseInt(o.substring(i,i+s),10),s*3+1,a),i+=s}return new n(n.Mode.NUMERIC,o.length,a)},n.makeAlphanumeric=function(o){if(!n.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");var a=[],i;for(i=0;i+2<=o.length;i+=2){var s=n.ALPHANUMERIC_CHARSET.indexOf(o.charAt(i))*45;s+=n.ALPHANUMERIC_CHARSET.indexOf(o.charAt(i+1)),l(s,11,a)}return i<o.length&&l(n.ALPHANUMERIC_CHARSET.indexOf(o.charAt(i)),6,a),new n(n.Mode.ALPHANUMERIC,o.length,a)},n.makeSegments=function(o){return o==""?[]:n.isNumeric(o)?[n.makeNumeric(o)]:n.isAlphanumeric(o)?[n.makeAlphanumeric(o)]:[n.makeBytes(n.toUtf8ByteArray(o))]},n.makeEci=function(o){var a=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<1<<7)l(o,8,a);else if(o<1<<14)l(2,2,a),l(o,14,a);else if(o<1e6)l(6,3,a),l(o,21,a);else throw new RangeError("ECI assignment value out of range");return new n(n.Mode.ECI,0,a)},n.isNumeric=function(o){return n.NUMERIC_REGEX.test(o)},n.isAlphanumeric=function(o){return n.ALPHANUMERIC_REGEX.test(o)},n.prototype.getData=function(){return this.bitData.slice()},n.getTotalBits=function(o,a){for(var i=0,s=0,v=o;s<v.length;s++){var u=v[s],f=u.mode.numCharCountBits(a);if(u.numChars>=1<<f)return 1/0;i+=4+f+u.bitData.length}return i},n.toUtf8ByteArray=function(o){o=encodeURI(o);for(var a=[],i=0;i<o.length;i++)o.charAt(i)!="%"?a.push(o.charCodeAt(i)):(a.push(parseInt(o.substring(i+1,i+3),16)),i+=2);return a},n.NUMERIC_REGEX=/^[0-9]*$/,n.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,n.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n}();e.QrSegment=d})(ce||(ce={}));(function(e){(function(t){var l=function(){function r(c,d){this.ordinal=c,this.formatBits=d}return r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),r}();t.Ecc=l})(e.QrCode||(e.QrCode={}))})(ce||(ce={}));(function(e){(function(t){var l=function(){function r(c,d){this.modeBits=c,this.numBitsCharCount=d}return r.prototype.numCharCountBits=function(c){return this.numBitsCharCount[Math.floor((c+7)/17)]},r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),r}();t.Mode=l})(e.QrSegment||(e.QrSegment={}))})(ce||(ce={}));var he=ce,wt="H",Ue={L:he.QrCode.Ecc.LOW,M:he.QrCode.Ecc.MEDIUM,Q:he.QrCode.Ecc.QUARTILE,H:he.QrCode.Ecc.HIGH},Go=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function Ct(e){return e in Ue}function St(e,t){t===void 0&&(t=0);var l=[];return e.forEach(function(r,c){var d=null;r.forEach(function(n,o){if(!n&&d!==null){l.push("M".concat(d+t," ").concat(c+t,"h").concat(o-d,"v1H").concat(d+t,"z")),d=null;return}if(o===r.length-1){if(!n)return;d===null?l.push("M".concat(o+t,",").concat(c+t," h1v1H").concat(o+t,"z")):l.push("M".concat(d+t,",").concat(c+t," h").concat(o+1-d,"v1H").concat(d+t,"z"));return}n&&d===null&&(d=o)})}),l.join("")}var Qe={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:wt,validator:function(e){return Ct(e)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0}},Yo=Me(Me({},Qe),{renderAs:{type:String,required:!1,default:"canvas",validator:function(e){return["canvas","svg"].indexOf(e)>-1}}}),Xo=ee({name:"QRCodeSvg",props:Qe,setup:function(e){var t=z(0),l=z(""),r=function(){var c=e.value,d=e.level,n=e.margin,o=he.QrCode.encodeText(c,Ue[d]).getModules();t.value=o.length+n*2,l.value=St(o,n)};return r(),vt(r),function(){return C("svg",{width:e.size,height:e.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(t.value," ").concat(t.value)},[C("path",{fill:e.background,d:"M0,0 h".concat(t.value,"v").concat(t.value,"H0z")}),C("path",{fill:e.foreground,d:l.value})])}}}),Jo=ee({name:"QRCodeCanvas",props:Qe,setup:function(e){var t=z(null),l=function(){var r=e.value,c=e.level,d=e.size,n=e.margin,o=e.background,a=e.foreground,i=t.value;if(!!i){var s=i.getContext("2d");if(!!s){var v=he.QrCode.encodeText(r,Ue[c]).getModules(),u=v.length+n*2,f=window.devicePixelRatio||1,p=d/u*f;i.height=i.width=d*f,s.scale(p,p),s.fillStyle=o,s.fillRect(0,0,u,u),s.fillStyle=a,Go?s.fill(new Path2D(St(v,n))):v.forEach(function(y,b){y.forEach(function(k,E){k&&s.fillRect(E+n,b+n,1,1)})})}}};return xe(l),vt(l),function(){return C("canvas",{ref:t,style:{width:"".concat(e.size,"px"),height:"".concat(e.size,"px")}})}}}),Zo=ee({name:"Qrcode",render:function(){var e=this.$props,t=e.renderAs,l=e.value,r=e.size,c=e.margin,d=e.level,n=e.background,o=e.foreground,a=r>>>0,i=c>>>0,s=Ct(d)?d:wt;return C(t==="svg"?Xo:Jo,{value:l,size:a,margin:i,level:s,background:n,foreground:o})},props:Yo});const en={class:"text-overline"},tn={class:"text-h5 q-mt-sm q-mb-xs"},on={class:"text-caption text-grey"},nn=ee({__name:"UploadSuccessDialog",props:{isShow:{type:Boolean,required:!0},receiveCode:{type:String,required:!0}},emits:["update:is-show"],setup(e,{emit:t}){const l=e,r=T(()=>`${location.origin}/?receive_code=${l.receiveCode}`),c=Ie({useScope:"global"}),d=n=>{if(!navigator.clipboard){ae.create({message:c.t("notify.copyNotSupported"),position:"top",type:"negative"});return}navigator.clipboard.writeText(n).then(()=>{ae.create({message:c.t("notify.copySuccess"),position:"top",type:"positive"})}).catch(()=>{ae.create({message:c.t("notify.copyFail"),position:"top",type:"negative"})})};return(n,o)=>(I(),K(De,{"model-value":e.isShow,persistent:""},{default:w(()=>[g(Ne,{flat:"",bordered:""},{default:w(()=>[g(we,{horizontal:""},{default:w(()=>[g(we,{class:"q-pt-xs"},{default:w(()=>[Re("div",en,_(n.$t("dialogs.receiveInfo")),1),Re("div",tn,[x(_(e.receiveCode)+" ",1),g(H,{round:"",size:"md",flat:"",icon:"content_copy",onClick:o[0]||(o[0]=a=>d(e.receiveCode))})]),Re("div",on,[x(_(r.value)+" ",1),g(H,{round:"",size:"xs",flat:"",icon:"content_copy",onClick:o[1]||(o[1]=a=>d(r.value))})])]),_:1}),g(we,{class:"col-5 flex flex-center"},{default:w(()=>[g(Zo,{value:r.value},null,8,["value"])]),_:1})]),_:1}),g(qe),g(Be,null,{default:w(()=>[g(H,{onClick:o[2]||(o[2]=a=>t("update:is-show",!1)),flat:"",color:"primary"},{default:w(()=>[x(_(n.$t("buttons.ok")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),an=(e,t)=>{const l=Math.max(Math.ceil(e.size/t),1),r=[];for(let c=0;c<l;c++){const d=c*t,n=Math.min(d+t,e.size),o=e.slice(d,n);r.push(o)}return r},ln=async(e,t,l,r,c)=>{const d=new FormData;d.append("chunk",c),d.append("size",String(t)),d.append("index",String(l)),d.append("total",String(r)),await Eo(e,d)};let Ee;const rn=new Uint8Array(16);function sn(){if(!Ee&&(Ee=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ee))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ee(rn)}const B=[];for(let e=0;e<256;++e)B.push((e+256).toString(16).slice(1));function un(e,t=0){return(B[e[t+0]]+B[e[t+1]]+B[e[t+2]]+B[e[t+3]]+"-"+B[e[t+4]]+B[e[t+5]]+"-"+B[e[t+6]]+B[e[t+7]]+"-"+B[e[t+8]]+B[e[t+9]]+"-"+B[e[t+10]]+B[e[t+11]]+B[e[t+12]]+B[e[t+13]]+B[e[t+14]]+B[e[t+15]]).toLowerCase()}const cn=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var nt={randomUUID:cn};function dn(e,t,l){if(nt.randomUUID&&!t&&!e)return nt.randomUUID();e=e||{};const r=e.random||(e.rng||sn)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){l=l||0;for(let c=0;c<16;++c)t[l+c]=r[c];return t}return un(r)}const fn=Re("br",null,null,-1),vn=ee({__name:"UploadForm",setup(e){const t=z(null);(async()=>{const u=await ko();t.value=u.result})();const r=z(!1),c={keepDays:1,isDownloadTimesLimited:!0,downloadTimes:1,type:"text",text:"",file:null},d=z(M({},c)),n=z(!1),o=z(""),a=st(),i=Ie({useScope:"global"}),s=async()=>{if(d.value.type==="text"){r.value=!0;try{const E=await To({downloadTimes:d.value.isDownloadTimesLimited?d.value.downloadTimes:0,keepDays:d.value.keepDays,text:d.value.text});ae.create({message:E.message,position:"top",type:"positive"}),o.value=E.result,n.value=!0}finally{r.value=!1}return}r.value=!0;const u=a.dialog({message:`${i.t("dialogs.uploading")}... 0%`,progress:!0,persistent:!0,ok:!1}),f=an(d.value.file,t.value.uploadChunkBytes),p=dn(),y=[];for(let E=0;E<f.length;E++)y.push(ln(p,d.value.file.size,E,f.length,f[E]));let b=0;const k=new Promise((E,L)=>{for(const $ of y)$.then(()=>{b++;const F=Math.floor(b/y.length*100);u.update({message:`${i.t("dialogs.uploading")}... ${F}%`}),b===y.length&&E()}).catch(L)});try{await Promise.all([k]);const E=await Ro(p,{downloadTimes:d.value.isDownloadTimesLimited?d.value.downloadTimes:0,keepDays:d.value.keepDays,filename:d.value.file.name});ae.create({message:E.message,position:"top",type:"positive"}),o.value=E.result,n.value=!0}finally{u.hide(),r.value=!1}},v=()=>{d.value=M({},c)};return(u,f)=>(I(),Pe(ze,null,[g(nn,{"is-show":n.value,"onUpdate:isShow":f[0]||(f[0]=p=>n.value=p),"receive-code":o.value},null,8,["is-show","receive-code"]),g(ht,{onSubmit:s,onReset:v,class:"q-gutter-md"},{default:w(()=>[g(Fe,{filled:"",type:"number",modelValue:d.value.keepDays,"onUpdate:modelValue":f[1]||(f[1]=p=>d.value.keepDays=p),modelModifiers:{number:!0},label:`${u.$t("forms.labels.keepDays")} *`,"lazy-rules":"",rules:[p=>p>=1&&p<=t.value.keepDays||u.$t("forms.rules.range",{label:u.$t("forms.labels.keepDays"),min:1,max:t.value.keepDays})]},null,8,["modelValue","label","rules"]),g(uo,{modelValue:d.value.isDownloadTimesLimited,"onUpdate:modelValue":f[2]||(f[2]=p=>d.value.isDownloadTimesLimited=p),label:`${u.$t("forms.labels.isDownloadTimesLimited")} *`,"left-label":""},null,8,["modelValue","label"]),fn,d.value.isDownloadTimesLimited?(I(),K(Fe,{key:0,filled:"",type:"number",modelValue:d.value.downloadTimes,"onUpdate:modelValue":f[3]||(f[3]=p=>d.value.downloadTimes=p),modelModifiers:{number:!0},label:`${u.$t("forms.labels.downloadTimes")} *`,"lazy-rules":"",rules:[p=>p>=1&&p<=t.value.downloadTimes||u.$t("forms.rules.range",{label:u.$t("forms.labels.downloadTimes"),min:1,max:t.value.downloadTimes})]},null,8,["modelValue","label","rules"])):co("",!0),g(Je,{modelValue:d.value.type,"onUpdate:modelValue":f[4]||(f[4]=p=>d.value.type=p),val:"text",label:u.$t("forms.labels.text")},null,8,["modelValue","label"]),g(Je,{modelValue:d.value.type,"onUpdate:modelValue":f[5]||(f[5]=p=>d.value.type=p),val:"file",label:u.$t("forms.labels.file")},null,8,["modelValue","label"]),d.value.type==="text"?(I(),K(Vo,{key:1,"model-value":d.value.text,filled:"","lazy-rules":"",counter:"",rules:[p=>p.length>=1&&p.length<=t.value.uploadTextLength||u.$t("forms.rules.rangeLength",{label:u.$t("forms.labels.text"),min:1,max:t.value.uploadTextLength})]},{control:w(()=>[g(bt,{text:d.value.text,"onUpdate:text":f[6]||(f[6]=p=>d.value.text=p)},null,8,["text"])]),hint:w(()=>[x(_(u.$t("forms.hints.richText")),1)]),_:1},8,["model-value","rules"])):(I(),K(Wo,{key:2,filled:"",clearable:"","bottom-slots":"",modelValue:d.value.file,"onUpdate:modelValue":f[8]||(f[8]=p=>d.value.file=p),label:`${u.$t("forms.labels.file")} *`,"lazy-rules":"",rules:[p=>p||u.$t("forms.rules.notEmpty",{label:u.$t("forms.labels.file")}),p=>p.size<=t.value.uploadFileBytes||`${u.$t("forms.rules.maxSize",{label:u.$t("forms.labels.file"),max:t.value.uploadFileBytes/1048576})} MB`],counter:""},{prepend:w(()=>[g(be,{name:"cloud_upload",onClick:f[7]||(f[7]=fo(()=>{},["stop"]))})]),_:1},8,["modelValue","label","rules"])),g(H,{loading:r.value,label:u.$t("buttons.submit"),type:"submit",color:"primary"},null,8,["loading","label"]),g(H,{label:u.$t("buttons.reset"),type:"reset"},null,8,["label"])]),_:1}),g(zt,{showing:!t.value},{default:w(()=>[g(Mt,{size:"xl",color:"primary"})]),_:1},8,["showing"])],64))}}),Sn=ee({__name:"IndexPage",setup(e){const t=z("receive");return(l,r)=>(I(),K(Ne,null,{default:w(()=>[g(At,{"model-value":20,disable:""},{before:w(()=>[g(Nt,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=c=>t.value=c),vertical:"",class:"text-primary"},{default:w(()=>[g(je,{name:"receive",icon:"file_download",label:l.$t("tabs.receive")},null,8,["label"]),g(je,{name:"upload",icon:"file_upload",label:l.$t("tabs.upload")},null,8,["label"])]),_:1},8,["modelValue"])]),after:w(()=>[g(Lt,{modelValue:t.value,"onUpdate:modelValue":r[1]||(r[1]=c=>t.value=c),animated:"",vertical:"","keep-alive":"","transition-prev":"jump-up","transition-next":"jump-up"},{default:w(()=>[g(Ke,{name:"receive"},{default:w(()=>[g(Ho)]),_:1}),g(Ke,{name:"upload"},{default:w(()=>[g(vn)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});export{Sn as default};
