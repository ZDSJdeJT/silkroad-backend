import{Q as j,a as A,f as O,b as T,c as w,d as U,e as B}from"./QInnerLoading.60e78d3a.js";import{i as z,d,l as F,e as M,h as $,j as E,a as L,n as G,F as V,f as x,M as S,$ as K,Q as I,R as q,K as o,I as c,V as Q,J as y,W as R,O as W,H as C,S as h,aI as N,au as _,N as D,aG as H,r as J}from"./index.6d9bfb19.js";import"./axios.7123f59d.js";import{g as X,a as Y,u as Z,b as ee}from"./admin.790e4785.js";import{Q as P}from"./QForm.8ea1dfeb.js";import"./selection.f86ea5ce.js";import"./i18n.1af5fd8d.js";const te={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function ae(){const{props:e,proxy:{$q:a}}=E(),n=z(F,()=>{console.error("QPageSticky needs to be child of QLayout")}),s=d(()=>{const i=e.position;return{top:i.indexOf("top")>-1,right:i.indexOf("right")>-1,bottom:i.indexOf("bottom")>-1,left:i.indexOf("left")>-1,vertical:i==="top"||i==="bottom",horizontal:i==="left"||i==="right"}}),u=d(()=>n.header.offset),r=d(()=>n.right.offset),l=d(()=>n.footer.offset),m=d(()=>n.left.offset),t=d(()=>{let i=0,p=0;const b=s.value,k=a.lang.rtl===!0?-1:1;b.top===!0&&u.value!==0?p=`${u.value}px`:b.bottom===!0&&l.value!==0&&(p=`${-l.value}px`),b.left===!0&&m.value!==0?i=`${k*m.value}px`:b.right===!0&&r.value!==0&&(i=`${-k*r.value}px`);const v={transform:`translate(${i}, ${p})`};return e.offset&&(v.margin=`${e.offset[1]}px ${e.offset[0]}px`),b.vertical===!0?(m.value!==0&&(v[a.lang.rtl===!0?"right":"left"]=`${m.value}px`),r.value!==0&&(v[a.lang.rtl===!0?"left":"right"]=`${r.value}px`)):b.horizontal===!0&&(u.value!==0&&(v.top=`${u.value}px`),l.value!==0&&(v.bottom=`${l.value}px`)),v}),g=d(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function f(i){const p=M(i.default);return $("div",{class:g.value,style:t.value},e.expand===!0?p:[$("div",p)])}return{$layout:n,getStickyContent:f}}var le=L({name:"QPageSticky",props:te,setup(e,{slots:a}){const{getStickyContent:n}=ae();return()=>n(a)}});const oe=["top","middle","bottom"];var ne=L({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>oe.includes(e)}},setup(e,{slots:a}){const n=d(()=>e.align!==void 0?{verticalAlign:e.align}:null),s=d(()=>{const u=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(u!==void 0?` text-${u}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>$("div",{class:s.value,style:n.value,role:"alert","aria-label":e.label},G(a.default,e.label!==void 0?[e.label]:[]))}});const se={class:"text-h4"},re=V({__name:"SystemInfo",setup(e){const a=x(null);return(async()=>{const s=await X();a.value=s.result})(),(s,u)=>{var r;return y(),S(Q,null,[K("div",se,[I(q((r=a.value)==null?void 0:r.appName)+" ",1),o(ne,{outline:"",align:"middle",color:"primary"},{default:c(()=>{var l;return[I("v"+q((l=a.value)==null?void 0:l.appVersion),1)]}),_:1})]),o(j,{showing:!a.value},{default:c(()=>[o(A,{size:"xl",color:"primary"})]),_:1},8,["showing"])],64)}}}),ue=V({__name:"EditSettingsForm",setup(e){const a=R(),n=x([]),s=x([]);(async()=>{const l=await Y();s.value=l.result,n.value=new Array(s.value.length).fill(!1)})();const r=async(l,m)=>{n.value[l]=!0;try{const t=await Z(s.value[l].key,m);D.create({message:t.message,position:"top",type:"positive"})}finally{n.value[l]=!1}};return(l,m)=>(y(!0),S(Q,null,W(s.value,(t,g)=>(y(),S("div",{key:g},[t.isText?(y(),C(P,{key:0,onSubmit:f=>r(g,t.textValue),class:"q-gutter-md flex items-center justify-between"},{default:c(()=>[o(N,{filled:"",type:t.key==="ADMIN_PASSWORD"?"password":"text",modelValue:t.textValue,"onUpdate:modelValue":f=>t.textValue=f,label:`${t.label[h(a).lang.isoName]} *`,class:"tw-flex-1","lazy-rules":"",rules:[f=>f.length>=t.min&&f.length<=t.max||l.$t("forms.rules.rangeLength",{label:`${t.label[h(a).lang.isoName]}`,min:t.min,max:t.max})]},null,8,["type","modelValue","onUpdate:modelValue","label","rules"]),o(_,{type:"submit",round:"",flat:"",icon:"save",loading:n.value[g]},null,8,["loading"])]),_:2},1032,["onSubmit"])):(y(),C(P,{key:1,onSubmit:f=>r(g,t.numberValue),class:"q-gutter-md flex items-center justify-between"},{default:c(()=>[o(N,{filled:"",type:"number",modelValue:t.numberValue,"onUpdate:modelValue":f=>t.numberValue=f,modelModifiers:{number:!0},label:`${t.label[h(a).lang.isoName]} *`,class:"tw-flex-1","lazy-rules":"",rules:[f=>f>=t.min&&f<=t.max||l.$t("forms.rules.range",{label:`${t.label[h(a).lang.isoName]}`,min:t.min,max:t.max})]},null,8,["modelValue","onUpdate:modelValue","label","rules"]),o(_,{type:"submit",round:"",flat:"",icon:"save",loading:n.value[g]},null,8,["loading"])]),_:2},1032,["onSubmit"]))]))),128))}}),be=V({__name:"ConsolePage",setup(e){const a=x(!1),n=async()=>{a.value=!0;try{const u=await ee();D.create({message:u.message,position:"top",type:"positive"}),J.push({name:"AdminLogin"})}finally{a.value=!1}},s=x("systemInfo");return(u,r)=>(y(),S(Q,null,[o(H,null,{default:c(()=>[o(O,{"model-value":20,disable:""},{before:c(()=>[o(T,{modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=l=>s.value=l),vertical:"",class:"text-primary"},{default:c(()=>[o(w,{name:"systemInfo",icon:"info",label:u.$t("tabs.systemInfo")},null,8,["label"]),o(w,{name:"settings",icon:"settings",label:u.$t("tabs.settings")},null,8,["label"])]),_:1},8,["modelValue"])]),after:c(()=>[o(U,{modelValue:s.value,"onUpdate:modelValue":r[1]||(r[1]=l=>s.value=l),animated:"",vertical:"","keep-alive":"","transition-prev":"jump-up","transition-next":"jump-up"},{default:c(()=>[o(B,{name:"systemInfo"},{default:c(()=>[o(re)]),_:1}),o(B,{name:"settings"},{default:c(()=>[o(ue)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(le,{position:"bottom-left",offset:[18,18]},{default:c(()=>[o(_,{fab:"",color:"primary",icon:"logout",onClick:n,loading:a.value},null,8,["loading"])]),_:1})],64))}});export{be as default};
